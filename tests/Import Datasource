
import pycurl
from io import BytesIO

raw_data = (
    'callCount=1\n'
    'page=/Scada-LTS/import_project.htm\n'
    'httpSessionId=\n'
    'scriptSessionId=D15BC242A0E69D4251D5585A07806324697\n'
    'c0-scriptName=EmportDwr\n'
    'c0-methodName=importData\n'
    'c0-id=0\n'
    'c0-param0=string:{ "dataSources":[ { "xid":"se001_eq007_brax", '
    '"type":"MODBUS_IP", "alarmLevels":{ "POINT_WRITE_EXCEPTION":"URGENT", '
    '"DATA_SOURCE_EXCEPTION":"URGENT", "POINT_READ_EXCEPTION":"URGENT" }, '
    '"updatePeriodType":"SECONDS", "transportType":"TCP_KEEP_ALIVE", '
    '"contiguousBatches":false, "createSlaveMonitorPoints":false, '
    '"createSocketMonitorPoint":false, "enabled":false, "encapsulated":true, '
    '"host":"localhost", "maxReadBitCount":2000, "maxReadRegisterCount":125, '
    '"maxWriteRegisterCount":120, "name":"SE-001 EQ-007 Brax", "port":502, '
    '"quantize":false, "retries":2, "timeout":500, "updatePeriods":10 } ]}\n'
    'batchId=8\n'
)

buffer = BytesIO()

c = pycurl.Curl()
c.setopt(c.URL, 'http://localhost:8080/Scada-LTS/dwr/call/plaincall/EmportDwr.importData.dwr')
c.setopt(c.POST, 1)
c.setopt(c.POSTFIELDS, raw_data)
c.setopt(c.COOKIEFILE, 'cookies')
c.setopt(c.WRITEDATA, buffer)
c.perform()
c.close()

response = buffer.getvalue().decode('utf-8')
print(response)
